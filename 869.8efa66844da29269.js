"use strict";(self.webpackChunklaparo_med=self.webpackChunklaparo_med||[]).push([[869],{869:(I,p,r)=>{r.r(p),r.d(p,{PasswordResetComponent:()=>A});var a=r(9773),c=r(6223),u=r(7523),f=r(3843),l=r(6614),_=r(6814),g=r(83),d=r(9515),t=r(2029),w=r(7992);const h=function(){return["../login"]};function P(e,i){1&e&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"a",11),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,3,"passwordRestSuccess")," "),t.xp6(2),t.Q6J("routerLink",t.DdM(7,h)),t.xp6(1),t.Oqu(t.lcZ(5,5,"login")))}function C(e,i){1&e&&(t.TgZ(0,"small",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"phoneNotFound")))}function x(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"label",16),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",17),t.YNc(6,C,3,3,"small",18),t.TgZ(7,"div",19)(8,"button",20),t.NdJ("click",function(){t.CHM(s);const n=t.oxw(2);return t.KtG(n.submit())}),t._uU(9),t.ALo(10,"translate"),t.qZA()()()()}if(2&e){const s=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,6,"phone")),t.xp6(2),t.Q6J("mask","00 000 00 00")("prefix",s.phonePrefix)("showMaskTyped",!0),t.xp6(1),t.Q6J("ngIf",s.phoneNotFound),t.xp6(3),t.hij(" ",t.lcZ(10,8,"resetPasswordBtn")," ")}}function M(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const s=t.oxw(3);t.xp6(1),t.hij("",s.timer," sec")}}function O(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"a",27),t.NdJ("click",function(){t.CHM(s);const n=t.oxw(3);return t.KtG(n.resendCode())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"resendCode")))}function v(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"label",16),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",22),t.TgZ(6,"div",23)(7,"button",20),t.NdJ("click",function(){t.CHM(s);const n=t.oxw(2);return t.KtG(n.confirmPassword())}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",24),t.YNc(11,M,2,1,"span",25),t.YNc(12,O,3,3,"ng-template",null,26,t.W1O),t.qZA()()()()}if(2&e){const s=t.MAs(13),o=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"enterSecureCode")),t.xp6(5),t.hij(" ",t.lcZ(9,6,"confirmBtn")," "),t.xp6(3),t.Q6J("ngIf",o.timer>0)("ngIfElse",s)}}function Z(e,i){1&e&&(t.TgZ(0,"small",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"minLengthPassword")))}function T(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"label",16),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",28),t.YNc(6,Z,3,3,"small",18),t.TgZ(7,"div",19)(8,"button",20),t.NdJ("click",function(){t.CHM(s);const n=t.oxw(2);return t.KtG(n.createNewPassword())}),t._uU(9),t.ALo(10,"translate"),t.qZA()()()()}if(2&e){const s=t.oxw(2);let o;t.xp6(3),t.Oqu(t.lcZ(4,3,"createNewPassword")),t.xp6(3),t.Q6J("ngIf",(null==(o=s.form.get("password"))?null:o.touched)&&(null==(o=s.form.get("password"))?null:o.invalid)),t.xp6(3),t.hij(" ",t.lcZ(10,5,"createNewPassword")," ")}}function R(e,i){if(1&e&&(t.TgZ(0,"form",12)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",13),t.YNc(5,x,11,10,"div",14),t.YNc(6,v,14,8,"div",14),t.YNc(7,T,11,7,"div",14),t.qZA()()),2&e){const s=t.oxw();t.Q6J("formGroup",s.form),t.xp6(2),t.hij(" ",t.lcZ(3,6,"resetPasswordText")," "),t.xp6(2),t.Q6J("ngSwitch",s.resetPasswordStep),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3)}}let A=(()=>{var e;class i{constructor(o,n,m){this.fb=o,this.$auth=n,this.$destroy=m,this.phonePrefix=f.g.PHONE_PREFIX,this.resetPasswordStep=1,this.isSuccess=!1,this.timer=60,this.phoneNotFound=!1}ngOnInit(){this.initForm()}initForm(){this.form=this.fb.group({phone:["",[c.kI.required]],secure_code:[""],password:["",[c.kI.minLength(8)]]}),this.form.controls.phone.valueChanges.subscribe(()=>{this.phoneNotFound&&(this.phoneNotFound=!1)})}startTimer(){let o=setInterval(()=>{--this.timer,0===this.timer&&clearInterval(o)},1e3)}submit(){if(this.form.invalid)return;console.log(111);const o=this.form.getRawValue();o.phone="998"+o.phone,delete o.secure_code,delete o.password,this.$auth.resetPassword(o).pipe((0,a.R)(this.$destroy)).subscribe({next:n=>{console.log(n),"Not found."!==n.detail&&(this.resetPasswordStep=2,this.startTimer())},error:n=>{this.phoneNotFound=!0}})}confirmPassword(){if(!this.form.controls.secure_code.value)return;const o=this.form.getRawValue();o.phone="998"+o.phone,delete o.password,this.$auth.confirmResetPassword(o).pipe((0,a.R)(this.$destroy)).subscribe(n=>{n.token&&(this.form.reset(),this.token=n.token,this.resetPasswordStep=3),console.log(n)})}createNewPassword(){if(this.form.controls.password.invalid)return void console.log(this.form.controls.password);const o=this.form.getRawValue();delete o.phone,delete o.secure_code;const[n,m]=this.token.split("/");this.$auth.setNewPassword(n,m,o).pipe((0,a.R)(this.$destroy)).subscribe(E=>{this.isSuccess=!0,console.log(E)})}resendCode(){this.$auth.resendCode({phone:"998"+this.form.controls.phone.value}).pipe((0,a.R)(this.$destroy)).subscribe(n=>{this.timer=60,this.startTimer(),console.log(n)})}}return(e=i).\u0275fac=function(o){return new(o||e)(t.Y36(c.qu),t.Y36(w.e),t.Y36(l.E))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-password-reset"]],standalone:!0,features:[t._Bn([l.E]),t.jDz],decls:11,vars:2,consts:[[1,"default"],[1,"grid","grid--xl"],[1,"row"],[1,"col-lg-12"],[1,"text"],[1,"woocommerce"],[1,"shop__account"],[1,"woocommerce-notices-wrapper"],["class","success",4,"ngIf"],["class","woocommerce-ResetPassword lost_reset_password",3,"formGroup",4,"ngIf"],[1,"success"],[3,"routerLink"],[1,"woocommerce-ResetPassword","lost_reset_password",3,"formGroup"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"woocommerce-form-row","woocommerce-form-row--first","form-row","form-row-first"],["for","user_login"],["type","text","name","user_login","id","user_login","formControlName","phone","autocomplete","username",1,"woocommerce-Input","woocommerce-Input--text","input-text",3,"mask","prefix","showMaskTyped"],["class","error",4,"ngIf"],[1,"woocommerce-form-row","form-row",2,"margin-top","10px"],["type","submit","value","Reset password",1,"woocommerce-Button","button",3,"click"],[1,"error"],["type","text","formControlName","secure_code",1,"woocommerce-Input","woocommerce-Input--text","input-text"],[1,"woocommerce-form-row","form-row",2,"margin-top","10px","display","flex","align-items","center","justify-content","space-between"],[1,"resend"],[4,"ngIf","ngIfElse"],["resend",""],[3,"click"],["type","text","formControlName","password",1,"woocommerce-Input","woocommerce-Input--text","input-text"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"section",6)(7,"div",1),t._UZ(8,"div",7),t.YNc(9,P,6,8,"div",8),t.YNc(10,R,8,8,"form",9),t.qZA()()()()()()()()),2&o&&(t.xp6(9),t.Q6J("ngIf",n.isSuccess),t.xp6(1),t.Q6J("ngIf",!n.isSuccess))},dependencies:[c.u5,c._Y,c.Fj,c.JJ,c.JL,c.UX,c.sg,c.u,u.Z6,_.O5,_.RF,_.n9,g.rH,d.aw,d.X$],styles:[".shop__account[_ngcontent-%COMP%], .shop__myaccount[_ngcontent-%COMP%]{margin-top:100px}.default[_ngcontent-%COMP%]{min-height:50vh;display:flex;align-items:center}.shop__account[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-family:Acherus-Medium;margin-bottom:10px}label[_ngcontent-%COMP%]{margin-bottom:10px}.woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{padding:3px;margin:0 0 6px}.woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%], .woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;margin:0;outline:0;line-height:normal}.shop__account[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{background-color:#f4f4f4;width:100%;padding:10px 15px;transition:all .4s;cursor:pointer;font-size:14px}.woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-first[_ngcontent-%COMP%], .woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-last[_ngcontent-%COMP%], .woocommerce-page[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-first[_ngcontent-%COMP%], .woocommerce-page[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-last[_ngcontent-%COMP%]{width:47%;overflow:visible}@media (max-width: 768px){.woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-first[_ngcontent-%COMP%], .woocommerce[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-last[_ngcontent-%COMP%], .woocommerce-page[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-first[_ngcontent-%COMP%], .woocommerce-page[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row-last[_ngcontent-%COMP%]{width:100%}}.shop__account[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-weight:500!important;text-transform:uppercase!important;font-size:14px!important;line-height:170%!important;align-items:center!important;cursor:pointer!important;padding:10px 30px!important;transition:all .4s!important;background-color:#00619d!important;color:#fff!important}.shop__account[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#000!important;color:#fff!important}.success[_ngcontent-%COMP%]{background:#F6F5F8;border-top:5px solid #00619D;padding:20px;font-family:Acherus-Medium;font-size:14px;line-height:100%}.success[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00619d;cursor:pointer}.error[_ngcontent-%COMP%]{font-size:12px;line-height:100%;font-family:Acherus-Medium;color:red}.resend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00619d;cursor:pointer}"]}),i})()}}]);